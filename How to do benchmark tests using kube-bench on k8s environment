In day to day operations how to maintain security of your environment and how to reduce attack surface in your environment.



CIS (Centre for Internet Security) is responsible for providing benchmark tests for security and hardening of an environment. In case of Kubernetes the process is pretty simple.



Step 1:  Check for the kube-bench release required for the benchmark testing



https://github.com/aquasecurity/kube-bench/releases/tag



Step 2: Get the tar.gz file



curl -L <URL> -o <tar file name>



Step 3: Unzip and untar the file contents



tar -xvf <tar-file>



Step 4: Run the kube-bench test



 ./kube-bench --config-dir <cfg folder> --config <full path to config.yaml> > output.txt



Step 5: Search for test results and all remediation in output.txt



vi output.txt



some examples

-----------------------------------------------------------------------------

== Remediations ==

1.1.9 Run the below command (based on the file location on your system) on the master node.

For example,

chmod 644 <path/to/cni/files>



1.1.10 Run the below command (based on the file location on your system) on the master node.

For example,

chown root:root <path/to/cni/files>



1.1.12 On the etcd server node, get the etcd data directory, passed as an argument --data-dir,

from the below command:

ps -ef | grep etcd

Run the below command (based on the etcd data directory found above).

For example, chown etcd:etcd /var/lib/etcd



1.1.19 Run the below command (based on the file location on your system) on the master node.

For example,

chown -R root:root /etc/kubernetes/pki/



1.2.1 Edit the API server pod specification file /etc/kubernetes/manifests/kube-apiserver.yaml

on the master node and set the below parameter.

--anonymous-auth=false



----------------------------------------------------------------------------

